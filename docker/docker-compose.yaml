# services:
#   gis:
#     image: osgeo/grass-gis:main-alpine
#     container_name: gis_dev_env
#     tty: true
#     stdin_open: true
#     working_dir: /workspace
#     volumes:
#       - ./backend:/workspace
#       - ./data:/data
#       - ./init.sh:/init.sh        # run-on-start script
#     command: ["/bin/bash", "/init.sh"]
#     ports:
#       - "8000:8000"  # FastAPI
#       - "8888:8888"  # Jupyter, if needed

# version: "3.9"

# services:
#   gis:
#     image: ghcr.io/osgeo/gdal:ubuntu-full-latest
#     container_name: gis_dev_env
#     tty: true
#     stdin_open: true
#     working_dir: /workspace
#     volumes:
#       - ./backend:/workspace
#       - ./data:/data
#       - ./init.sh:/init.sh
#     command: >
#       bash -c "chmod +x /init.sh && /init.sh"
#     ports:
#       - "8000:8000"
#       - "8888:8888"

services:
  gis:
    build: .                          # Builds from your Dockerfile
    image: gis_dev_env_image          # Name of your built image
    container_name: gis_dev_env
    working_dir: /workspace
    tty: true
    stdin_open: true

    volumes:
      - ./backend:/workspace          # Your FastAPI / Python code
      - ./data:/data                  # GIS raster/vector files

    ports:
      - "8000:8000"                   # FastAPI app
      - "8888:8888"                   # Jupyter if you run it
